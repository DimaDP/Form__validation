{"version":3,"sources":["components/Header.js","components/Card/Card.js","components/validators.js","App.js","index.js"],"names":["Header","className","src","alt","type","cardCodes","4","5","3","6","cardLogos","visa","maestro","masterCard","Card","useState","isProcessing","setIsProcessing","cardNumber","setCardNumber","isCardNumberValid","setIsCardNumberValid","date","setDate","isDateValid","setDateValid","cvv","setCvv","isCvvValid","setIsCvvValid","isSubmited","setIsSubmited","currentImage","setCurentImage","errorMessage","window","screen","width","onSubmit","event","preventDefault","setTimeout","value","test","nCheck","bEven","number","replace","length","n","cDigit","charAt","nDigit","parseInt","numberLunaCheck","dateList","split","Date","dataCheck","alert","autoComplete","onChange","e","target","payId","preparedCardNumber","substr","i","style","backgroundImage","placeholder","preparedDate","divideDdate","name","preparedCvv","size","color","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.730afaf6.chunk.js","sourcesContent":["import React from 'react';\nimport './Header.scss';\n\nexport const Header = () => (\n  <header className=\"header\">\n    <img src=\"./img/CREDITON.png\" alt=\"crediton\" className=\"header__logo\" />\n    <div className=\"language-toggler\">\n      <button\n        type=\"button\"\n        className=\"language-toggler__link language-toggler__link--active\"\n      >\n        РУ\n      </button>\n      <button type=\"button\" className=\"language-toggler__link\">УКР</button>\n    </div>\n  </header>\n);\n","import React, { useState } from 'react';\nimport ClipLoader from 'react-spinners/ClipLoader';\nimport './Card.scss';\nimport { numberLunaCheck, dataCheck } from '../validators';\n\nconst cardCodes = {\n  4: 'visa',\n  5: 'masterCard',\n  3: 'maestro',\n  6: 'maestro',\n};\n\nconst cardLogos = {\n  visa: './img/visa.png',\n  maestro: './img/Maestro-logo.jpg',\n  masterCard: './img/master.png',\n};\nlet x = './img/master.png'\n\nexport const Card = () => {\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [cardNumber, setCardNumber] = useState('');\n  const [isCardNumberValid, setIsCardNumberValid] = useState(true);\n  const [date, setDate] = useState('');\n  const [isDateValid, setDateValid] = useState(true);\n  const [cvv, setCvv] = useState('');\n  const [isCvvValid, setIsCvvValid] = useState(true);\n  const [isSubmited, setIsSubmited] = useState(false);\n  const [currentImage, setCurentImage] = useState('');\n\n  const handleCardNumberInput = (e) => {\n    const { value } = e.target;\n    const payId = value[0];\n    const preparedCardNumber = value.replace(/\\D/g, '').substr(0, 16);\n    let number = '';\n\n    const paymentType = cardCodes[payId];\n    const image = cardLogos[paymentType];\n\n    setCurentImage(image);\n\n    for (let i = 0; i < preparedCardNumber.length; i += 1) {\n      if (i % 4 === 0 && i !== 0) {\n        number += ` ${preparedCardNumber[i]}`;\n      } else {\n        number += preparedCardNumber[i];\n      }\n    }\n\n    setCardNumber(number);\n  };\n\n  const handleDateInput = (event) => {\n    setDateValid(true);\n    const { value } = event.target;\n    const preparedDate = value.replace(/\\D/g, '').substr(0, 4);\n    let divideDdate = '';\n\n    for (let i = 0; i < preparedDate.length; i += 1) {\n      if (i === 2) {\n        divideDdate += `/${preparedDate[i]}`;\n      } else {\n        divideDdate += preparedDate[i];\n      }\n    }\n\n    setDate(divideDdate);\n  };\n\n  const handleCvv = (event) => {\n    const { value } = event.target;\n    const preparedCvv = value.replace(/\\D/g, '').substr(0, 3);\n\n    setCvv(preparedCvv);\n  };\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    setIsSubmited(true);\n    setIsProcessing(true);\n    setTimeout(() => {\n      if (numberLunaCheck(cardNumber)) {\n        setIsCardNumberValid(true);\n      } else {\n        setIsCardNumberValid(false);\n      }\n\n      if (dataCheck(date)) {\n        setDateValid(true);\n      } else {\n        setDateValid(false);\n      }\n\n      if (cvv.length < 3) {\n        setIsCvvValid(false);\n      } else {\n        setIsCvvValid(true);\n      }\n\n      if (isCvvValid && isCardNumberValid && isDateValid && isSubmited) {\n        setIsProcessing(false);\n        // eslint-disable-next-line no-alert\n        setTimeout(() => alert('Карта добавлена'), 0);\n      } else {\n        setIsProcessing(false);\n      }\n    }, 1500);\n  };\n\n  const errorMessage = (window.screen.width > 600)\n    ? '* Поле обязательно для ввода' : '* Поле обязательно';\n\n  return (\n    <section className=\"section\">\n      <h1>{`Valid  ${isCvvValid && isCardNumberValid && isDateValid}`}</h1>\n      <h2>{`isSubmited  ${isSubmited}`}</h2>\n\n      <form className=\"card__form\" onSubmit={handleSubmit} autoComplete=\"off\">\n        <span className=\"card__heading\">Номер карты</span>\n        <input\n          onChange={handleCardNumberInput}\n          value={cardNumber}\n          className={(isCardNumberValid || (cardNumber === '' && !isSubmited))\n            ? 'card__input' : 'card__input card__input--error'}\n          style={{ backgroundImage: `url(${currentImage})` }}\n          placeholder=\"Номер карты\"\n        />\n        <span className=\"card__error\">\n          {(cardNumber === '' && isSubmited)\n            ? '* Поле обязательно для ввода'\n            : !isCardNumberValid\n              ? 'Введите валидный номер карты' : ''\n          }\n        </span>\n        <div className=\"card__wrapper\">\n          {/* <input\n            onChange={handleDateInput}\n            value={date}\n            name=\"date\"\n            className={\n              isDateValid ? 'card__input card__input--small'\n                : 'card__input card__input--small card__input--error'\n            }\n            placeholder=\"Срок действия\"\n          /> */}\n\n          {/* ///////////////////////////////// */}\n          <input\n            onChange={handleDateInput}\n            value={date}\n            name=\"date\"\n            className={\n              (!isSubmited || isDateValid) ? 'card__input card__input--small'\n                : 'card__input card__input--small card__input--error'\n            }\n            placeholder=\"Срок действия\"\n          />\n          {/* ///////////////////////////////// */}\n          <input\n            type=\"password\"\n            value={cvv}\n            onChange={handleCvv}\n            className={\n              isCvvValid ? 'card__input card__input--small'\n                : 'card__input card__input--small card__input--error'\n            }\n            placeholder=\"CVV код\"\n          />\n        </div>\n        <div className=\"errors-wrapper\">\n          {/* <span className=\"card__error--small card__error\">\n            {(date === '' && isSubmited) ? errorMessage\n              : isDateValid ? '' : 'enter valid date'\n            }\n          </span> */}\n\n          {/* ///////////////////////////////// */}\n<span className=\"card__error--small card__error\">\n            {\n              (!isSubmited || isDateValid) ? '' :\n              ( date.length === 0 ) ? errorMessage : 'enter valid date'\n            }\n          </span>\n          {/* ///////////////////////////////// */}\n\n          <span className=\"card__error--small card__error\">\n            {(cvv === '' && isSubmited) ? errorMessage\n              : isCvvValid ? '' : 'enter valid CVV'\n            }\n          </span>\n        </div>\n        <span className=\"card__info\">\n          Для привязки карты мы проведем платеж в\n          размере 1.00 UAH, который будет возвращен\n          в течении 30 минут\n        </span>\n        <button\n          type=\"submit\"\n          className=\"card__button\"\n        >\n          {isProcessing ? (\n            <ClipLoader\n              size={30}\n              color=\"#fff\"\n            />\n          ) : 'Получить деньги'}\n        </button>\n      </form>\n\n    </section>\n  );\n};\n","export const numberLunaCheck = (value) => {\n  if (value === '') {\n    return false;\n  }\n\n  if (/[^0-9-\\s]+/.test(value)) {\n    return false;\n  }\n\n  let nCheck = 0;\n  let bEven = false;\n  const number = value.replace(/\\D/g, '');\n\n  if (number.length < 16) {\n    return false;\n  }\n\n  for (let n = number.length - 1; n >= 0; n -= 1) {\n    const cDigit = number.charAt(n);\n    let nDigit = parseInt(cDigit, 10);\n\n    if (bEven) {\n      nDigit *= 2;\n      if ((nDigit) > 9) {\n        nDigit -= 9;\n      }\n    }\n\n    nCheck += nDigit;\n    bEven = !bEven;\n  }\n\n  return (nCheck % 10) === 0;\n};\n\nexport const dataCheck = (date) => {\n  const dateList = date.split('/');\n\n  if (dateList[0] > 12 || dateList[0] < 1) {\n    return false;\n  }\n\n  return new Date() < new Date(+`20${dateList[1]}`, +dateList[0] - 1);\n};\n","import React from 'react';\nimport './App.scss';\nimport { Header } from './components/Header';\nimport { Card } from './components/Card/Card';\n\nconst App = () => (\n  <div className=\"App\">\n    <Header />\n    <h1 className=\"heading\">Добавление платежной карты</h1>\n    <Card />\n  </div>\n);\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}